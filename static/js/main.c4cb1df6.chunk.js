(this["webpackJsonptest-glyan"]=this["webpackJsonptest-glyan"]||[]).push([[0],{69:function(e,t,r){"use strict";r.r(t);var n,c,a=r(0),s=r.n(a),i=r(16),o=r.n(i),l=r(10),u=r(11),d=r(91),j=r(99),b=r(105),p=r(92),O=r(93),h=r(94),f=r(107),x=r(2),v=Object(d.a)((function(e){var t=e.breakpoints;return{leaflet:Object(u.a)({width:"100%",height:400},t.down("sm"),{height:300})}})),g=function(){var e=Object(l.c)((function(e){return e.selectedUsers.selected})),t=v(),r=Object.keys(e).map((function(t){var r,n,c,a,s,i,o,l=e[t];if(!l)return null;var u=null!==(r=null===l||void 0===l||null===(n=l.address)||void 0===n||null===(c=n.geo)||void 0===c?void 0:c.lat)&&void 0!==r?r:0,d=null!==(a=null===l||void 0===l||null===(s=l.address)||void 0===s||null===(i=s.geo)||void 0===i?void 0:i.lng)&&void 0!==a?a:0,j=null!==(o=null===l||void 0===l?void 0:l.name)&&void 0!==o?o:"\u0411\u0435\u0437 \u0438\u043c\u0435\u043d\u0438";return Object(x.jsx)(p.a,{position:[u,d],children:Object(x.jsx)(O.a,{children:j})},l.id)}));return Object(x.jsxs)(h.a,{center:[0,0],zoom:1,scrollWheelZoom:!1,className:t.leaflet,children:[Object(x.jsx)(f.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r]})},m=r(23),y=r(102),w=r(103),k=r(101),U=r(100),z=r(96),F=r(95),S=r(106),C=r(17),N=r.n(C),I=r(29),T=r(18),W=Object(T.c)("users/getUsers",function(){var e=Object(I.a)(N.a.mark((function e(t,r){var n,c,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.extra.api,c=r.rejectWithValue,e.prev=1,a=n.getUsers(),e.abrupt("return",a);case 6:return e.prev=6,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",c(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,r){return e.apply(this,arguments)}}()),E=Object(T.b)("selectedUsers/toggle"),J=Object(T.c)("selectedUsers/sendSelectedUsers",function(){var e=Object(I.a)(N.a.mark((function e(t,r){var n,c,a,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.extra.api,c=r.rejectWithValue,a=Object.keys(t).map((function(e){var r=t[e];return{id:r.id,zipcode:r.zipcode}})),e.prev=2,e.next=5,n.sendUsers(a);case 5:return s=e.sent,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",c(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),P=function(e){var t=e.id,r=e.name,n=e.phone,c=e.address,a=Object(l.b)(),s=!!Object(l.c)((function(e){return e.selectedUsers.selected}))[t];return Object(x.jsxs)(F.a,{hover:!0,children:[Object(x.jsx)(z.a,{children:r}),Object(x.jsx)(z.a,{align:"right",children:n}),Object(x.jsx)(z.a,{padding:"checkbox",children:Object(x.jsx)(S.a,{checked:s,onChange:function(){return a(E({id:t,zipcode:null===c||void 0===c?void 0:c.zipcode}))}})})]})},B=r(97),D=function(){return Object(x.jsx)(B.a,{children:Object(x.jsxs)(F.a,{children:[Object(x.jsx)(z.a,{children:"\u0418\u043c\u044f"}),Object(x.jsx)(z.a,{align:"right",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(x.jsx)(z.a,{padding:"checkbox"})]})})},L=r(98),M=Object(d.a)((function(e){return{error:{color:e.palette.error.main}}})),R=function(){var e=M(),t=Object(l.b)(),r=Object(l.c)((function(e){return e.selectedUsers.selected})),n=Object(l.c)((function(e){return e.selectedUsers.loading})),c=Object(l.c)((function(e){return e.selectedUsers.error})),a=0===Object.keys(r).length;return Object(x.jsxs)(b.a,{display:"flex",alignItems:"center",px:3,my:1,children:[Object(x.jsx)(L.a,{startIcon:n?Object(x.jsx)(j.a,{size:20,color:"secondary"}):void 0,onClick:function(){return t(J(r))},disabled:a,variant:"contained",color:c?"secondary":"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),c?Object(x.jsx)(b.a,{ml:2,className:e.error,children:c}):null]})},V=Object(d.a)((function(e){var t=e.breakpoints;return{table:Object(u.a)({margin:"10px",width:"500px"},t.down("sm"),{width:"100%"})}})),_=function(){var e=V(),t=Object(l.c)((function(e){return e.users.data}));return Object(x.jsxs)(U.a,{children:[Object(x.jsx)(k.a,{className:e.table,children:Object(x.jsxs)(y.a,{size:"small",children:[Object(x.jsx)(D,{}),Object(x.jsx)(w.a,{children:t.map((function(e){return Object(x.jsx)(P,Object(m.a)({},e),e.id)}))})]})}),Object(x.jsx)(R,{})]})},A=Object(d.a)((function(e){var t=e.breakpoints;return{error:{color:e.palette.error.main},appWrapper:Object(u.a)({display:"flex"},t.down("sm"),{flexDirection:"column"})}})),G=function(){var e,t=A(),r=Object(l.b)(),n=Object(l.c)((function(e){return e.users}));return Object(a.useEffect)((function(){r(W())}),[r]),(null===n||void 0===n?void 0:n.loading)?Object(x.jsx)(b.a,{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",children:Object(x.jsx)(j.a,{size:100})}):(null===n||void 0===n?void 0:n.error)?Object(x.jsx)(b.a,{className:t.error,children:null!==(e=null===n||void 0===n?void 0:n.error)&&void 0!==e?e:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(b.a,{className:t.appWrapper,children:[Object(x.jsx)(_,{}),Object(x.jsx)(b.a,{flexGrow:1,children:Object(x.jsx)(g,{})})]})})},Z=r(104),q=(r(47),0),H={getUsers:function(){var e=Object(I.a)(N.a.mark((function e(){var t,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/users");case 2:return t=e.sent,e.next=5,t.json();case 5:if(r=e.sent,200===t.status){e.next=8;break}throw new Error("Failed to load users list");case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendUsers:function(){var e=Object(I.a)(N.a.mark((function e(t){var r,n,c,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(q+=1)%2===0?"/status/400":"",n="".concat("https://httpbin.org/post").concat(r),e.next=5,fetch(n,{method:"POST",body:JSON.stringify(t),headers:{authorization:"very_secret_token","Content-Type":"application/json"}});case 5:return c=e.sent,e.next=8,c.json();case 8:if(a=e.sent,200===c.status){e.next=11;break}throw new Error("Failed to send users list");case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},K=r(13),Q=Object(T.d)({name:"users",initialState:{data:[],loading:!1,error:null},extraReducers:(n={},Object(u.a)(n,W.pending,(function(e){e.loading=!0})),Object(u.a)(n,W.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),Object(u.a)(n,W.rejected,(function(e){e.loading=!1,e.error="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"})),n)}),X=Object(T.d)({name:"selectedUsers",initialState:{loading:!1,error:null,selected:{},data:null},extraReducers:(c={},Object(u.a)(c,E,(function(e,t){e.error=null;var r=t.payload.id;Object(K.a)(e.selected)[r]?delete e.selected[r]:e.selected[r]=t.payload})),Object(u.a)(c,J.pending,(function(e){e.loading=!0})),Object(u.a)(c,J.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),Object(u.a)(c,J.rejected,(function(e,t){e.loading=!1,e.error="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(t.payload)})),c)}),Y=Object(T.a)({reducer:{users:Q.reducer,selectedUsers:X.reducer},middleware:function(e){return e({thunk:{extraArgument:{api:H}}}).concat([])},devTools:false}),$=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,110)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};o.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Z.a,{}),Object(x.jsx)(l.a,{store:Y,children:Object(x.jsx)(G,{})})]})}),document.getElementById("root")),$()}},[[69,1,2]]]);
//# sourceMappingURL=main.c4cb1df6.chunk.js.map