(this["webpackJsonptest-glyan"]=this["webpackJsonptest-glyan"]||[]).push([[0],{142:function(e,t,n){},217:function(e,t,n){"use strict";n.r(t);var r,c,s=n(0),a=n.n(s),o=n(24),i=n.n(o),u=n(25),d=(n(141),n(142),n(114)),l=n(53),j=n(37),p=n.n(j),b=n(61),f=n(43),v=Object(f.c)("users/getUsers",function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.extra.api,c=n.rejectWithValue,e.prev=1,s=r.getUsers(),e.abrupt("return",s);case 6:return e.prev=6,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",c(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(f.b)("selectedUsers/toggle"),h=Object(f.c)("selectedUsers/sendSelectedUsers",function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r,c,s,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.extra.api,c=n.rejectWithValue,s=Object.keys(t).map((function(e){var n=t[e];return{id:n.id,zipcode:n.address.zipcode}})),e.prev=2,e.next=5,r.sendUsers(s);case 5:return a=e.sent,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",c(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),x=n(14),g=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.selectedUsers.selected})),n=Object(u.c)((function(e){return e.selectedUsers.loading})),r=Object(u.c)((function(e){return e.selectedUsers.error})),c=0===Object.keys(t).length;return Object(x.jsxs)("div",{className:"user-table-footer",children:[Object(x.jsx)(l.a,{type:"primary",shape:"round",icon:n?Object(x.jsx)(d.a,{size:"small"}):void 0,onClick:function(){return e(h(t))},disabled:c,color:r?"secondary":"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),r?Object(x.jsx)("div",{children:r}):null]})},m=n(220),y=n(221),w=n(222),k=n(224),U=function(){var e=Object(u.c)((function(e){return e.selectedUsers.selected})),t=Object.keys(e).map((function(t){var n,r,c,s,a,o,i,u=e[t];if(!u)return null;var d=null!==(n=null===u||void 0===u||null===(r=u.address)||void 0===r||null===(c=r.geo)||void 0===c?void 0:c.lat)&&void 0!==n?n:0,l=null!==(s=null===u||void 0===u||null===(a=u.address)||void 0===a||null===(o=a.geo)||void 0===o?void 0:o.lng)&&void 0!==s?s:0,j=null!==(i=null===u||void 0===u?void 0:u.name)&&void 0!==i?i:"\u0411\u0435\u0437 \u0438\u043c\u0435\u043d\u0438";return Object(x.jsx)(m.a,{position:[d,l],children:Object(x.jsx)(y.a,{children:j})},u.id)}));return Object(x.jsxs)(w.a,{center:[0,0],zoom:1,scrollWheelZoom:!1,className:"leaflet",children:[Object(x.jsx)(k.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t]})},S=n(223),z=[{title:"\u0418\u043c\u044f",dataIndex:"name"},{title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",dataIndex:"phone"}],F=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.users.data})),n=Object(u.c)((function(e){return e.selectedUsers.selected})),r=t.map((function(e){return{id:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e?void 0:e.name,key:null===e||void 0===e?void 0:e.id,phone:null===e||void 0===e?void 0:e.phone,address:null===e||void 0===e?void 0:e.address}})),c={selectedRowKeys:Object.keys(n).map((function(e){return n[e].id})),onSelect:function(t){e(O({id:t.id,zipcode:t.zipcode,address:t.address}))}};return Object(x.jsx)("div",{children:Object(x.jsx)(S.a,{size:"small",pagination:!1,columns:z,dataSource:r,rowSelection:c})})},C=function(){var e,t=Object(u.b)(),n=Object(u.c)((function(e){return e.users}));return Object(s.useEffect)((function(){t(v())}),[t]),(null===n||void 0===n?void 0:n.loading)?Object(x.jsx)("div",{className:"error-layout",children:Object(x.jsx)(d.a,{size:"large"})}):(null===n||void 0===n?void 0:n.error)?Object(x.jsx)("div",{children:null!==(e=null===n||void 0===n?void 0:n.error)&&void 0!==e?e:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(F,{}),Object(x.jsx)(g,{}),Object(x.jsx)("div",{style:{flexGrow:1},children:Object(x.jsx)(U,{})})]})})},T=(n(123),0),E={getUsers:function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/users");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw new Error("Failed to load users list");case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendUsers:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(T+=1)%2===0?"/status/400":"",r="".concat("https://httpbin.org/post").concat(n),e.next=5,fetch(r,{method:"POST",body:JSON.stringify(t),headers:{authorization:"very_secret_token","Content-Type":"application/json"}});case 5:return c=e.sent,e.next=8,c.json();case 8:if(s=e.sent,200===c.status){e.next=11;break}throw new Error("Failed to send users list");case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=n(38),N=n(27),J=Object(f.d)({name:"users",initialState:{data:[],loading:!1,error:null},extraReducers:(r={},Object(I.a)(r,v.pending,(function(e){e.loading=!0})),Object(I.a)(r,v.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),Object(I.a)(r,v.rejected,(function(e){e.loading=!1,e.error="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"})),r)}),P=Object(f.d)({name:"selectedUsers",initialState:{loading:!1,error:null,selected:{},data:null},extraReducers:(c={},Object(I.a)(c,O,(function(e,t){e.error=null;var n=t.payload.id;Object(N.a)(e.selected)[n]?delete e.selected[n]:e.selected[n]=t.payload})),Object(I.a)(c,h.pending,(function(e){e.loading=!0})),Object(I.a)(c,h.fulfilled,(function(e,t){e.loading=!1,e.data=t.payload})),Object(I.a)(c,h.rejected,(function(e,t){e.loading=!1,e.error="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(t.payload)})),c)}),R=Object(f.a)({reducer:{users:J.reducer,selectedUsers:P.reducer},middleware:function(e){return e({thunk:{extraArgument:{api:E}}}).concat([])},devTools:false}),W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,225)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(u.a,{store:R,children:Object(x.jsx)(C,{})})})}),document.getElementById("root")),W()}},[[217,1,2]]]);
//# sourceMappingURL=main.a14e9642.chunk.js.map